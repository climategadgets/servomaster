%define kernelversion %(uname -r)

%define kernelrel %(uname -r | sed -e s/-/_/g)
%define real_release 6

Name: servomaster
Version: @VERSION@
Release: 1
Summary: ServoMaster: uniform Java servo controller driver
Source: %{name}-%{version}.tar.gz
Copyright: GPL
Group: System/Libraries
URL: http://servomaster.sourceforge.net/
Buildroot: %{_tmppath}/%{name}-root
Prefix: /usr
Packager: Vadim Tkachenko <vt@freehold.crocodile.org>
Requires: j2sdk >= 1.4.0
%description

ServoMaster is a unified hardware independent servo controller driver. Servo
controller is a device that allows to control common R/C servos using the
personal computer. This release provides Java support.

Two kinds of servo controllers are supported at this point:

- FT639 (http://www.ferrettronics.com/)
- Phidget family (http://www.phidgets.com/), including
	- UniServo
	- QuadServo
	- AdvancedServo

%clean
case "$RPM_BUILD_ROOT" in *-root) rm -rf $RPM_BUILD_ROOT ;; esac

%prep
%setup

%build
./configure --prefix=%{prefix} --enable-ft639 --enable-phidget --enable-rpm-build
make
make check

%install
case "$RPM_BUILD_ROOT" in *-root) rm -rf $RPM_BUILD_ROOT ;; esac
make install \
	prefix=$RPM_BUILD_ROOT%{prefix}

%post

%preun

%postun


%files
%defattr(-,root,root)
%doc README INSTALL INSTALL-Ant INSTALL-configure ChangeLog AUTHORS COPYING

%{prefix}/bin/servomaster_console
%{prefix}/bin/servomaster_sync_check
%{prefix}/share/java/servomaster-@VERSION@.jar
%{prefix}/share/java/javax.usb.properties
%{prefix}/share/java/jsr80.jar
%{prefix}/share/java/jsr80_linux.jar
%{prefix}/share/java/jsr80_ri.jar
%{prefix}/lib/libJavaxUsb.so
            
%changelog

* Tue Oct 12 2004 Vadim Tkachenko <vt@freehold.crocodile.org>
- Replaced jUSB with javax.usb

* Tue Feb 03 2003 Vadim Tkachenko <vt@freehold.crocodile.org>
- Initial take at RPM build
