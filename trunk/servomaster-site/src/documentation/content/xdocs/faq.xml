<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE faqs PUBLIC "-//APACHE//DTD FAQ V1.2//EN" "http://apache.org/forrest/dtd/faq-v12.dtd">

<faqs title="ServoMaster: Frequently Asked Questions">

    <part id="general">
        <title>General</title>

        <faq id="what_is_supported">
            <question>

                What hardware is supported?

            </question>
            <answer>

                <p>
                
                    Two generic classes of controllers are supported: serial
                    and USB. Specific list is:
                    
                </p>
                
                <dl>
                
                    <dt>
                    
                        Serial:
                        
                    </dt>
                    
                    <dd>
                    
                        FerretTronics <link href="site:ft639">FT639</link>;
                        
                    </dd>

                    <dt>
                    
                        USB:
                        
                    </dt>
                    
                    <dd>
                    
                        <ul>
                        
                            <li>
                            
                                <link
                                href="site:phidget_quad">PhidgetServo</link>;
                                
                            </li>

                            <li>
                            
                                PhidgetUniServo (as a subset of <link
                                href="site:phidget_quad">PhidgetServo</link>);
                                
                            </li>

                            <li>
                            
                                <link
                                href="site:phidget_servo8">PhidgetAdvancedServo</link>
                                (prototype).
                                
                            </li>
                            
                        </ul>
                        
                    </dd>
                    
                </dl>
                
                <p>
                
                    However, a lot of attention was paid to making the code
                    as abstract and reusable as possible, therefore, writing
                    a driver for a new device should take just a few days,
                    if not hours.
                    
                </p>
                
            </answer>
        </faq>
        <faq id="more_controllers">
            <question>

                Are there more hardware controller drivers coming?

            </question>
            <answer>

                <p>
                
                    Actually, quite a few. The <link
                    href="site:pololu">Pololu controller family</link>
                    driver is already usable, and <link
                    href="site:parallax">Parallax controller family</link>
                    is a few days away, but it's been extremely difficult to
                    find those few days to finish it.
                    
                </p>
                <p>
                
                    Then, there's one in the queue (<link
                    href="site:nic_servo">1-Wire&reg; based servo
                    controller</link> which is pretty close to my <link
                    href="site:contract">ideal servo controller</link>).
                    
                </p>
                
            </answer>
        </faq>
        <faq id="selection_criteria">
            <question>

                How do you select the hardware controllers to implement the
                drivers for?

            </question>
            <answer>

                <p>
                
                    First one I bought. The rest were donated.  If you want
                    the driver for your controller, consider donating one
                    <link href="site:credits">like others did</link> - by
                    now, the implementation is pretty straightforward, it
                    takes a day or two of straight coding.
                    
                    
                </p>
                
            </answer>
        </faq>
        <faq id="stable">
            <question>

                How stable is ServoMaster?

            </question>
            <answer>

                <p>
                
                    Rock solid. It's been used to run inside the <link
                    href="ext:dz">DIY Zoning Project</link> code for several
                    years, 24/7/365, non-stop. Never failed.
                    
                </p>
                
            </answer>
        </faq>
        <faq id="silent">
            <question>

                What is this "silent mode" thing?

            </question>
            <answer>

                <p>
                
                    If you are familiar with the servos, you probably know
                    that they can make a sound that can make you jump,
                    especially caught off guard. The application this
                    project is serving is intended to have the servos
                    operate next to people whose comfort level is paramount,
                    so they must not be scared do death periodically when
                    the servos come to life.
                    
                </p>
                <p>
                
                    Also, as servos wear down, they sometimes start
                    "growling".

                </p>
                <p>
                
                    In order to reduce noise related to servo operation, it
                    is possible to shut off the pulse to the servo - it
                    enters the "sleep mode" shortly thereafter. While
                    sleeping, it emits no noise.
                    
                </p>
                <p>
                     
                    As a side effect, this reduces the energy consumption
                    (the sleeping servo goes to a powerdown and consumes
                    about 8mA - thanks again, Chester) and servo wear. Since
                    the servos may be working 24x7, this may be important as
                    well.
                    
                </p>
                
            </answer>
        </faq>
        <faq id="too_big">
            <question>

                The Servomaster debug console doesn't fit into my screen!

            </question>
            <answer>
            
                <p>
                
                    It is a <link href="ext:bug_660607">known issue</link>
                    
                </p>

                <p>
                
                    Since the advent of 16-servo controllers it doesn't fit
                    into my 1600x1200 screen, either.
                    
                </p>
                <p>
                
                    This is unfortunate, and there are two things that can
                    possibly be done:

                </p>
                <ul>
                
                    <li>
                    
                        Decrease the size of the console elements to make it
                        all smaller. This is quite painful to implement
                        (basically I'll have to change the default font on
                        every single element), and will make the font
                        unreadable, which is unacceptable for me. Don't ask
                        for it, I won't do it.
                        
                    </li>
                    <li>
                    
                        Make the console frame scrollable. This has already
                        been done, and while it does look ugly, remember
                        that this is just a debug console we're talking
                        about, and I'd hate to put efforts into it if I can
                        do something more useful instead.
                        
                    </li>
                    
                </ul>
                <p>
                
                    So, the solution is to just change the frame size - and
                    the contents will become scrollable.
                    
                </p>
                
            </answer>
        </faq>
    </part>
    <part id="serial">
        <title>Serial</title>
        <faq id="javacomm">
            <question>

                Why do I keep getting <code>noClassDefFoundError:
                javax/comm/UnsupportedCommOperationException</code>?

            </question>
            <answer>

                <p>
                
                    Because you didn't install the <link
                    href="ext:javax-comm">JavaCOMM</link> properly. If you
                    keep getting probems even though you've followed the
                    instructions to the letter, try to go with the JRE
                    instead of JDK - copy the <code>comm.jar</code> to
                    <code>${JRE_HOME}/lib/ext</code> directory.
                    
                </p>
                <p>
                    
                    As a rule of thumb, the newer the version of the
                    JDK/JRE, the less problems you will have.
                
                </p>
                
            </answer>
        </faq>
    </part>
    <part id="usb">
        <title>USB</title>
        <faq id="visibility">
            <question>

                ServoMaster doesn't detect my USB controller, why?

            </question>
            <answer>

                <p>
                
                    This seems to be a peculiarity related to the way <link
                    href="ext:javax-usb">javax.usb</link> security is
                    implemented.
                    
                </p>
                
                <p>
                
                    The following output from
                    <code>servomaster_console</code> would be a good
                    indication that you're having this problem:
                    
                </p>
<source>
Unable to initialize controller, cause:
java.io.IOException: No compatible devices found. Make sure you have /proc/bus/usb read/write permissions.
        at org.freehold.servomaster.device.impl.usb.AbstractUsbServoController.findUSB(AbstractUsbServoController.java:259)
        at org.freehold.servomaster.device.impl.usb.AbstractUsbServoController.doInit(AbstractUsbServoController.java:474)
        at org.freehold.servomaster.device.model.AbstractServoController.init(AbstractServoController.java:110)
        at org.freehold.servomaster.view.Console.run(Console.java:166)
        at org.freehold.servomaster.view.Console.main(Console.java:134)
</source>
                
                <p>
                
                    Quick fix: <code>chmod -R a+w /proc/bus/usb</code> -
                    this will allow you to test whether the controller is
                    connected. Alternative way is to use
                    <code>usbview</code> utility, it should show the device
                    unconditionally (if it is present, that is).
                    
                </p>
                
                <warning>
                
                    It is not recommended to run ServoMaster code as root,
                    for security reasons. Nothing in particular, but I'm
                    just paranoid.
                    
                </warning>
                
                <p>
                
                    A more thorough solution involves properly configuring
                    <link href="ext:hotplug">hotplug</link>.
                    
                </p>
                
                <note>
                
                   Don't forget to check <link
                   href="site:faq_hid">hid</link> if your USB controller is
                   a Phidget.
                   
                </note>
                
            </answer>
        </faq>
    </part>
    <part id="phidgets">
        <title>Phidgets</title>
        <faq id="hid">
            <question>

                USB permissions are OK, but I still can't see the Phidget!

            </question>
            <answer>

                <p>
                
                    The symptom is usually a complaint about the fact that
                    the USB interface is already claimed (long line split):
                    
                </p>
<source>
Unable to initialize controller, cause:
java.io.IOException: Can't claim interface - already claimed. \
Make sure no other applications or modules (hid.o or phidgetservo.o in particular) use this device
        at org.freehold.servomaster.device.impl.usb.AbstractUsbServoController.doInit(AbstractUsbServoController.java:481)
        at org.freehold.servomaster.device.model.AbstractServoController.init(AbstractServoController.java:110)
        at org.freehold.servomaster.view.Console.run(Console.java:166)
        at org.freehold.servomaster.view.Console.main(Console.java:134)
</source>
                <p>
                
                    Following is the message you see in the system log if
                    this is happening (when you attach the controller):
                </p>

<source>
Mar  3 19:39:08 shadow kernel: ohci_hcd 0000:00:02.0: wakeup
Mar  3 19:39:08 shadow kernel: usb 2-3: new low speed USB device using ohci_hcd and address 2
Mar  3 19:39:09 shadow kernel: phidgetservo 2-3:1.0: USB 4-Motor PhidgetServo v3.0 attached
Mar  3 19:39:09 shadow kernel: usbcore: registered new driver phidgetservo
</source>
                <p>
                
                    Quick fix, depending on the kernel version, is: either
                    <code>rmmod hid</code> or <code>rmmod
                    phidgetservo</code>. It'll keep bothering you, though, as you unpug and re-plug the device.
                    
                </p>
                <p>
                    
                    A more thorough solution would be to add the culprit to
                    <link href="ext:hotplug">hotplug</link> blacklist, but
                    it may have an unfortunate side effect of disabling
                    <em>all</em> HID devices in older kernels. Recently,
                    hotplug has become smart enough to be able to
                    specifically ban the <code>phidgetservo</code> module -
                    look either into <code>/etc/hotplug/blacklist</code>, or
                    <code>/etc/modprobe.d/blacklist-compat</code> - the rest
                    is self-explanatory.
                
                </p>
                
                <p>
                
                    This is how your system log should look like if you're
                    successfully disabled the <code>phidgetservo</code>
                    module:
                    
                </p>
<source>
Mar  3 19:59:41 shadow kernel: ohci_hcd 0000:00:02.0: wakeup
Mar  3 19:59:41 shadow kernel: usb 2-3: new low speed USB device using ohci_hcd and address 4
</source>
                
            </answer>
        </faq>
        <faq id="servo8">
            <question>

                How do I get a hold of AdvancedServo?

            </question>
            <answer>

                <p>
                
                    You can't. The device that I have is a prototype
                    generously <link href="site:donations">donated</link> by
                    Chester Fitchett, a.k.a. Mr. <link
                    href="ext:phidgets">Phidget</link>. This magnificent
                    concept evolved into something even better that will
                    soon be available from Phidgets, Inc. - keep checking
                    in.
                
                </p>
                
            </answer>
        </faq>
    </part>
</faqs>
